<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.响应式数据 | 螺钉前端</title>
    <meta name="description" content="帮助零基础同学转行，入职前端开发，薪资5000-12000">
    <link rel="icon" href="/logo.png">
  <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?e2bd54b8015cec977c6f30d0896b8a1b";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
      </script>
    
    <link rel="preload" href="/assets/css/0.styles.830e21dc.css" as="style"><link rel="preload" href="/assets/js/app.4c3c285e.js" as="script"><link rel="preload" href="/assets/js/2.35988976.js" as="script"><link rel="preload" href="/assets/js/73.7d91c309.js" as="script"><link rel="prefetch" href="/assets/js/10.0809a72a.js"><link rel="prefetch" href="/assets/js/100.d8310b4b.js"><link rel="prefetch" href="/assets/js/101.503f02c3.js"><link rel="prefetch" href="/assets/js/102.5d351a2d.js"><link rel="prefetch" href="/assets/js/103.c6129a47.js"><link rel="prefetch" href="/assets/js/104.5ded5ac5.js"><link rel="prefetch" href="/assets/js/105.589fa0d4.js"><link rel="prefetch" href="/assets/js/106.a5d3f2d9.js"><link rel="prefetch" href="/assets/js/107.651f67d2.js"><link rel="prefetch" href="/assets/js/108.d0d9b2ce.js"><link rel="prefetch" href="/assets/js/109.1a94580a.js"><link rel="prefetch" href="/assets/js/11.117e5df8.js"><link rel="prefetch" href="/assets/js/110.5d026414.js"><link rel="prefetch" href="/assets/js/111.b9698895.js"><link rel="prefetch" href="/assets/js/112.2f1eee19.js"><link rel="prefetch" href="/assets/js/113.ab1cc016.js"><link rel="prefetch" href="/assets/js/114.bb666e12.js"><link rel="prefetch" href="/assets/js/115.792d9fcc.js"><link rel="prefetch" href="/assets/js/116.6c4b9e1a.js"><link rel="prefetch" href="/assets/js/117.0f22d149.js"><link rel="prefetch" href="/assets/js/118.e0cdb666.js"><link rel="prefetch" href="/assets/js/119.53a0c74f.js"><link rel="prefetch" href="/assets/js/12.44c347ff.js"><link rel="prefetch" href="/assets/js/120.d3bda3aa.js"><link rel="prefetch" href="/assets/js/121.2eac6dcb.js"><link rel="prefetch" href="/assets/js/122.0c22ef17.js"><link rel="prefetch" href="/assets/js/123.fb674a1e.js"><link rel="prefetch" href="/assets/js/124.c1957c66.js"><link rel="prefetch" href="/assets/js/125.82296d79.js"><link rel="prefetch" href="/assets/js/126.cad2ebcc.js"><link rel="prefetch" href="/assets/js/127.536fc158.js"><link rel="prefetch" href="/assets/js/128.f38a8121.js"><link rel="prefetch" href="/assets/js/129.835af9eb.js"><link rel="prefetch" href="/assets/js/13.0990c880.js"><link rel="prefetch" href="/assets/js/130.0e32ffff.js"><link rel="prefetch" href="/assets/js/131.06dc20fa.js"><link rel="prefetch" href="/assets/js/132.b3af08ce.js"><link rel="prefetch" href="/assets/js/133.d0d4d25d.js"><link rel="prefetch" href="/assets/js/134.7c659774.js"><link rel="prefetch" href="/assets/js/135.91d30218.js"><link rel="prefetch" href="/assets/js/136.705e71a1.js"><link rel="prefetch" href="/assets/js/137.67ac551a.js"><link rel="prefetch" href="/assets/js/138.e1f063e6.js"><link rel="prefetch" href="/assets/js/139.c64481f7.js"><link rel="prefetch" href="/assets/js/14.4d578419.js"><link rel="prefetch" href="/assets/js/140.b3a94175.js"><link rel="prefetch" href="/assets/js/141.b1881667.js"><link rel="prefetch" href="/assets/js/142.f60ac7ca.js"><link rel="prefetch" href="/assets/js/143.d2bf8c2b.js"><link rel="prefetch" href="/assets/js/144.28d0a4f2.js"><link rel="prefetch" href="/assets/js/145.2520fa3a.js"><link rel="prefetch" href="/assets/js/146.74de499d.js"><link rel="prefetch" href="/assets/js/147.f9128127.js"><link rel="prefetch" href="/assets/js/148.af3b2732.js"><link rel="prefetch" href="/assets/js/149.d82805ec.js"><link rel="prefetch" href="/assets/js/15.0aec8b55.js"><link rel="prefetch" href="/assets/js/150.25aeea37.js"><link rel="prefetch" href="/assets/js/151.abd7ef02.js"><link rel="prefetch" href="/assets/js/152.9144e36e.js"><link rel="prefetch" href="/assets/js/153.e161c356.js"><link rel="prefetch" href="/assets/js/154.d1f428f9.js"><link rel="prefetch" href="/assets/js/155.cfb64163.js"><link rel="prefetch" href="/assets/js/156.c1d7efea.js"><link rel="prefetch" href="/assets/js/157.7cc86938.js"><link rel="prefetch" href="/assets/js/158.0bbdbb57.js"><link rel="prefetch" href="/assets/js/159.6fb40b2e.js"><link rel="prefetch" href="/assets/js/16.ba17c819.js"><link rel="prefetch" href="/assets/js/160.a2704844.js"><link rel="prefetch" href="/assets/js/161.129a8d66.js"><link rel="prefetch" href="/assets/js/162.9fcbc103.js"><link rel="prefetch" href="/assets/js/163.bc8b2720.js"><link rel="prefetch" href="/assets/js/164.23718563.js"><link rel="prefetch" href="/assets/js/165.3832b2fb.js"><link rel="prefetch" href="/assets/js/166.50cdb4b6.js"><link rel="prefetch" href="/assets/js/167.3894de9c.js"><link rel="prefetch" href="/assets/js/168.31c105f6.js"><link rel="prefetch" href="/assets/js/169.ce5b3623.js"><link rel="prefetch" href="/assets/js/17.82672299.js"><link rel="prefetch" href="/assets/js/170.c1c272d8.js"><link rel="prefetch" href="/assets/js/171.28ae28fd.js"><link rel="prefetch" href="/assets/js/172.e88b63ba.js"><link rel="prefetch" href="/assets/js/173.d80be42c.js"><link rel="prefetch" href="/assets/js/174.c93d8ee6.js"><link rel="prefetch" href="/assets/js/175.5ad5c54a.js"><link rel="prefetch" href="/assets/js/176.9be9b361.js"><link rel="prefetch" href="/assets/js/177.1da98845.js"><link rel="prefetch" href="/assets/js/178.050b5a93.js"><link rel="prefetch" href="/assets/js/179.44f7d1b5.js"><link rel="prefetch" href="/assets/js/18.b20be58c.js"><link rel="prefetch" href="/assets/js/180.b5d4db3c.js"><link rel="prefetch" href="/assets/js/181.4a2a0ca9.js"><link rel="prefetch" href="/assets/js/182.07a102f3.js"><link rel="prefetch" href="/assets/js/183.cdcf0c40.js"><link rel="prefetch" href="/assets/js/184.4f78232c.js"><link rel="prefetch" href="/assets/js/185.f51bec5f.js"><link rel="prefetch" href="/assets/js/186.029f1d35.js"><link rel="prefetch" href="/assets/js/187.f255a676.js"><link rel="prefetch" href="/assets/js/188.de182007.js"><link rel="prefetch" href="/assets/js/189.10b972f3.js"><link rel="prefetch" href="/assets/js/19.b7271ed6.js"><link rel="prefetch" href="/assets/js/190.5fd9343d.js"><link rel="prefetch" href="/assets/js/191.f5152b31.js"><link rel="prefetch" href="/assets/js/192.66d7fa13.js"><link rel="prefetch" href="/assets/js/193.fdeaeda4.js"><link rel="prefetch" href="/assets/js/194.ad25ba5e.js"><link rel="prefetch" href="/assets/js/195.03913adc.js"><link rel="prefetch" href="/assets/js/196.d2ce6bf5.js"><link rel="prefetch" href="/assets/js/197.34acf369.js"><link rel="prefetch" href="/assets/js/198.a329ed4e.js"><link rel="prefetch" href="/assets/js/199.114b5c2b.js"><link rel="prefetch" href="/assets/js/20.ec886eea.js"><link rel="prefetch" href="/assets/js/200.91f58af4.js"><link rel="prefetch" href="/assets/js/201.8607f87f.js"><link rel="prefetch" href="/assets/js/202.1d1b5024.js"><link rel="prefetch" href="/assets/js/203.6332d6aa.js"><link rel="prefetch" href="/assets/js/204.144f7ce3.js"><link rel="prefetch" href="/assets/js/205.16a39432.js"><link rel="prefetch" href="/assets/js/206.6eac6d07.js"><link rel="prefetch" href="/assets/js/207.befb0534.js"><link rel="prefetch" href="/assets/js/208.82b906c6.js"><link rel="prefetch" href="/assets/js/209.8c8cce8f.js"><link rel="prefetch" href="/assets/js/21.f2a3e37a.js"><link rel="prefetch" href="/assets/js/210.6c38f127.js"><link rel="prefetch" href="/assets/js/211.3e7e3332.js"><link rel="prefetch" href="/assets/js/212.a9bc62eb.js"><link rel="prefetch" href="/assets/js/213.b5bce6ee.js"><link rel="prefetch" href="/assets/js/214.7a7e0c32.js"><link rel="prefetch" href="/assets/js/215.3363643e.js"><link rel="prefetch" href="/assets/js/216.576d4291.js"><link rel="prefetch" href="/assets/js/217.9b02761b.js"><link rel="prefetch" href="/assets/js/218.2c8d5026.js"><link rel="prefetch" href="/assets/js/219.0a093045.js"><link rel="prefetch" href="/assets/js/22.468bb897.js"><link rel="prefetch" href="/assets/js/220.25759ab0.js"><link rel="prefetch" href="/assets/js/221.45332d2d.js"><link rel="prefetch" href="/assets/js/222.d25f0cfa.js"><link rel="prefetch" href="/assets/js/223.0bfa2457.js"><link rel="prefetch" href="/assets/js/224.70b2953f.js"><link rel="prefetch" href="/assets/js/225.46da8954.js"><link rel="prefetch" href="/assets/js/226.097d15f7.js"><link rel="prefetch" href="/assets/js/227.10b91bea.js"><link rel="prefetch" href="/assets/js/228.5d586eb3.js"><link rel="prefetch" href="/assets/js/229.2a60964a.js"><link rel="prefetch" href="/assets/js/23.2b2fa42d.js"><link rel="prefetch" href="/assets/js/230.abcbb8ee.js"><link rel="prefetch" href="/assets/js/231.a314da07.js"><link rel="prefetch" href="/assets/js/232.64676258.js"><link rel="prefetch" href="/assets/js/233.9c86ded1.js"><link rel="prefetch" href="/assets/js/234.a18f20a6.js"><link rel="prefetch" href="/assets/js/235.3c6f087c.js"><link rel="prefetch" href="/assets/js/236.26e894d3.js"><link rel="prefetch" href="/assets/js/237.46d1f99f.js"><link rel="prefetch" href="/assets/js/238.46026479.js"><link rel="prefetch" href="/assets/js/239.ff830552.js"><link rel="prefetch" href="/assets/js/24.da8569e4.js"><link rel="prefetch" href="/assets/js/240.7ce2fbe0.js"><link rel="prefetch" href="/assets/js/241.7f63fcc0.js"><link rel="prefetch" href="/assets/js/242.8295f0de.js"><link rel="prefetch" href="/assets/js/243.f183b175.js"><link rel="prefetch" href="/assets/js/244.acc3278b.js"><link rel="prefetch" href="/assets/js/245.7ef73821.js"><link rel="prefetch" href="/assets/js/246.7ade592d.js"><link rel="prefetch" href="/assets/js/247.b6bdbc9e.js"><link rel="prefetch" href="/assets/js/248.397d3ae7.js"><link rel="prefetch" href="/assets/js/249.98b89913.js"><link rel="prefetch" href="/assets/js/25.44327d9b.js"><link rel="prefetch" href="/assets/js/250.108c519b.js"><link rel="prefetch" href="/assets/js/251.df25c95b.js"><link rel="prefetch" href="/assets/js/252.44d67967.js"><link rel="prefetch" href="/assets/js/253.c8c169a0.js"><link rel="prefetch" href="/assets/js/254.c6d1d240.js"><link rel="prefetch" href="/assets/js/255.3e875698.js"><link rel="prefetch" href="/assets/js/256.9608b951.js"><link rel="prefetch" href="/assets/js/257.5154d8b3.js"><link rel="prefetch" href="/assets/js/258.68c0084a.js"><link rel="prefetch" href="/assets/js/259.1e17eb83.js"><link rel="prefetch" href="/assets/js/26.8e3a2fdc.js"><link rel="prefetch" href="/assets/js/260.2bfb1254.js"><link rel="prefetch" href="/assets/js/261.305c4aba.js"><link rel="prefetch" href="/assets/js/262.f4e95dbe.js"><link rel="prefetch" href="/assets/js/263.958e0e0d.js"><link rel="prefetch" href="/assets/js/264.7baca583.js"><link rel="prefetch" href="/assets/js/265.cf5ee4ac.js"><link rel="prefetch" href="/assets/js/266.1c987332.js"><link rel="prefetch" href="/assets/js/267.10bf52cc.js"><link rel="prefetch" href="/assets/js/268.3b20da52.js"><link rel="prefetch" href="/assets/js/269.838c4103.js"><link rel="prefetch" href="/assets/js/27.01e54737.js"><link rel="prefetch" href="/assets/js/270.90dc1d21.js"><link rel="prefetch" href="/assets/js/271.293bf47a.js"><link rel="prefetch" href="/assets/js/272.ad955cce.js"><link rel="prefetch" href="/assets/js/273.20689a28.js"><link rel="prefetch" href="/assets/js/274.f1680a80.js"><link rel="prefetch" href="/assets/js/275.3aac1e18.js"><link rel="prefetch" href="/assets/js/276.4341cdcb.js"><link rel="prefetch" href="/assets/js/277.c1646afd.js"><link rel="prefetch" href="/assets/js/278.ffda642b.js"><link rel="prefetch" href="/assets/js/279.0712cfd5.js"><link rel="prefetch" href="/assets/js/28.4a3312b8.js"><link rel="prefetch" href="/assets/js/280.d0a9e837.js"><link rel="prefetch" href="/assets/js/281.7f94b988.js"><link rel="prefetch" href="/assets/js/29.7deca706.js"><link rel="prefetch" href="/assets/js/3.619aa9ab.js"><link rel="prefetch" href="/assets/js/30.bbe18c23.js"><link rel="prefetch" href="/assets/js/31.d9858940.js"><link rel="prefetch" href="/assets/js/32.b5337a99.js"><link rel="prefetch" href="/assets/js/33.743e0245.js"><link rel="prefetch" href="/assets/js/34.045bd74e.js"><link rel="prefetch" href="/assets/js/35.79ff5def.js"><link rel="prefetch" href="/assets/js/36.1a1400b4.js"><link rel="prefetch" href="/assets/js/37.66b0b9cc.js"><link rel="prefetch" href="/assets/js/38.1cbbe2a9.js"><link rel="prefetch" href="/assets/js/39.4b7cc766.js"><link rel="prefetch" href="/assets/js/4.72e92390.js"><link rel="prefetch" href="/assets/js/40.5e06f5bf.js"><link rel="prefetch" href="/assets/js/41.4e4631a8.js"><link rel="prefetch" href="/assets/js/42.880981c4.js"><link rel="prefetch" href="/assets/js/43.178e9db3.js"><link rel="prefetch" href="/assets/js/44.cb911db2.js"><link rel="prefetch" href="/assets/js/45.f46a1807.js"><link rel="prefetch" href="/assets/js/46.72d2caae.js"><link rel="prefetch" href="/assets/js/47.ec98d891.js"><link rel="prefetch" href="/assets/js/48.3e48a260.js"><link rel="prefetch" href="/assets/js/49.5b4acb74.js"><link rel="prefetch" href="/assets/js/5.60e38b16.js"><link rel="prefetch" href="/assets/js/50.87ebcffd.js"><link rel="prefetch" href="/assets/js/51.d0c481a1.js"><link rel="prefetch" href="/assets/js/52.ceeea1f7.js"><link rel="prefetch" href="/assets/js/53.aa7484c2.js"><link rel="prefetch" href="/assets/js/54.852fbdeb.js"><link rel="prefetch" href="/assets/js/55.71eed07f.js"><link rel="prefetch" href="/assets/js/56.d7b4184a.js"><link rel="prefetch" href="/assets/js/57.b855843f.js"><link rel="prefetch" href="/assets/js/58.99ea811e.js"><link rel="prefetch" href="/assets/js/59.c35d6ca0.js"><link rel="prefetch" href="/assets/js/6.e2a5f4eb.js"><link rel="prefetch" href="/assets/js/60.faa94541.js"><link rel="prefetch" href="/assets/js/61.201bd301.js"><link rel="prefetch" href="/assets/js/62.6b322f48.js"><link rel="prefetch" href="/assets/js/63.1d9e0c71.js"><link rel="prefetch" href="/assets/js/64.8da9224b.js"><link rel="prefetch" href="/assets/js/65.3b6af424.js"><link rel="prefetch" href="/assets/js/66.587fc6bc.js"><link rel="prefetch" href="/assets/js/67.29f1149e.js"><link rel="prefetch" href="/assets/js/68.c4b9a60c.js"><link rel="prefetch" href="/assets/js/69.32aee3ee.js"><link rel="prefetch" href="/assets/js/7.016407d6.js"><link rel="prefetch" href="/assets/js/70.9a8a0683.js"><link rel="prefetch" href="/assets/js/71.b8e3cdc6.js"><link rel="prefetch" href="/assets/js/72.f0fc170f.js"><link rel="prefetch" href="/assets/js/74.b5f0255a.js"><link rel="prefetch" href="/assets/js/75.e86f9491.js"><link rel="prefetch" href="/assets/js/76.033a8716.js"><link rel="prefetch" href="/assets/js/77.a4e3262b.js"><link rel="prefetch" href="/assets/js/78.e2ea8d44.js"><link rel="prefetch" href="/assets/js/79.72045e29.js"><link rel="prefetch" href="/assets/js/8.4428ceee.js"><link rel="prefetch" href="/assets/js/80.2dfbf868.js"><link rel="prefetch" href="/assets/js/81.a35fea2c.js"><link rel="prefetch" href="/assets/js/82.cac44de7.js"><link rel="prefetch" href="/assets/js/83.b1e15f71.js"><link rel="prefetch" href="/assets/js/84.744feca7.js"><link rel="prefetch" href="/assets/js/85.d4398600.js"><link rel="prefetch" href="/assets/js/86.2ff5fc32.js"><link rel="prefetch" href="/assets/js/87.2b2547de.js"><link rel="prefetch" href="/assets/js/88.8807bdd7.js"><link rel="prefetch" href="/assets/js/89.bf869c9a.js"><link rel="prefetch" href="/assets/js/9.f56957fc.js"><link rel="prefetch" href="/assets/js/90.4105c2f5.js"><link rel="prefetch" href="/assets/js/91.24a33f7f.js"><link rel="prefetch" href="/assets/js/92.8d7dbaad.js"><link rel="prefetch" href="/assets/js/93.9e6fd924.js"><link rel="prefetch" href="/assets/js/94.9381c401.js"><link rel="prefetch" href="/assets/js/95.eaa1808d.js"><link rel="prefetch" href="/assets/js/96.e3a8d59f.js"><link rel="prefetch" href="/assets/js/97.a6375129.js"><link rel="prefetch" href="/assets/js/98.ad841694.js"><link rel="prefetch" href="/assets/js/99.3a6761fd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.830e21dc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">螺钉前端</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/basics/" class="nav-link router-link-active">基础教程</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目实战</a></div><div class="nav-item"><a href="/article/" class="nav-link">零散文章</a></div><div class="nav-item"><a href="/association/" class="nav-link">一起学习</a></div><div class="nav-item"><a href="/architect/" class="nav-link">前端架构师</a></div><div class="nav-item"><a href="/article/螺钉课堂产品矩阵/" class="nav-link">螺钉课堂产品矩阵</a></div><div class="nav-item"><a href="https://edu.nodeing.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/basics/" class="nav-link router-link-active">基础教程</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目实战</a></div><div class="nav-item"><a href="/article/" class="nav-link">零散文章</a></div><div class="nav-item"><a href="/association/" class="nav-link">一起学习</a></div><div class="nav-item"><a href="/architect/" class="nav-link">前端架构师</a></div><div class="nav-item"><a href="/article/螺钉课堂产品矩阵/" class="nav-link">螺钉课堂产品矩阵</a></div><div class="nav-item"><a href="https://edu.nodeing.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  视频学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/basics/vue进阶/vue响应式数据.html" class="active sidebar-link">1.响应式数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/basics/vue进阶/vue响应式数据.html#_1-1-object-defineproperty" class="sidebar-link">1.1.Object.defineProperty</a></li><li class="sidebar-sub-header"><a href="/basics/vue进阶/vue响应式数据.html#_1-2-实现vue中的响应式数据" class="sidebar-link">1.2.实现Vue中的响应式数据</a></li><li class="sidebar-sub-header"><a href="/basics/vue进阶/vue响应式数据.html#_1-3-proxy基础用法" class="sidebar-link">1.3.proxy基础用法</a></li><li class="sidebar-sub-header"><a href="/basics/vue进阶/vue响应式数据.html#_1-4-使用proxy来实现响应式数据" class="sidebar-link">1.4.使用proxy来实现响应式数据</a></li></ul></li><li><a href="/basics/vue进阶/数据双向绑定实现.html" class="sidebar-link">2.数据双向绑定实现</a></li><li><a href="/basics/vue进阶/计算属性、watch和生命周期.html" class="sidebar-link">3.计算属性、watch和生命周期</a></li><li><a href="/basics/vue进阶/vue-cli详解.html" class="sidebar-link">4.vue-cli详解</a></li><li><a href="/basics/vue进阶/组件间通信.html" class="sidebar-link">5.组件间通信</a></li><li><a href="/basics/vue进阶/路由.html" class="sidebar-link">6.路由</a></li><li><a href="/basics/vue进阶/vuex.html" class="sidebar-link">7.vuex</a></li><li><a href="/basics/vue进阶/单元测试.html" class="sidebar-link">8.单元测试</a></li><li><a href="/basics/vue进阶/服务端渲染.html" class="sidebar-link">9.服务端渲染</a></li><li><a href="/basics/vue进阶/pwa.html" class="sidebar-link">10.pwa</a></li><li><a href="/basics/vue进阶/权限管理.html" class="sidebar-link">11.权限管理</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-响应式数据"><a href="#_1-响应式数据" aria-hidden="true" class="header-anchor">#</a> 1.响应式数据</h1> <h2 id="_1-1-object-defineproperty"><a href="#_1-1-object-defineproperty" aria-hidden="true" class="header-anchor">#</a> 1.1.Object.defineProperty</h2> <h3 id="_1-1-1-基础语法"><a href="#_1-1-1-基础语法" aria-hidden="true" class="header-anchor">#</a> 1.1.1.基础语法</h3> <p>定义一个对象可以使用构造函数或者字面量的形式，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;xiaoqiang&quot;</span>
<span class="token comment">// 或者 使用字面量形式</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;xiaowang&quot;</span>
</code></pre></div><p>除了上面定义属性的方式外，还可以使用Object.defineProperty这种方式来定义或修改属性</p> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>参数：

    obj要在其上定义属性的对象。

    prop要定义或修改的属性的名称。

    descriptor将被定义或修改的属性描述符。

返回值：
    被传递给函数的对象
</code></pre></div><h3 id="_1-1-2-描述详解"><a href="#_1-1-2-描述详解" aria-hidden="true" class="header-anchor">#</a> 1.1.2.描述详解</h3> <div class="language-js extra-class"><pre class="language-js"><code>value<span class="token punctuation">:</span> 设置属性的值
writable<span class="token punctuation">:</span> 值是否可以重写。<span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
enumerable<span class="token punctuation">:</span> 目标属性是否可以被枚举。<span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
configurable<span class="token punctuation">:</span> 目标属性是否可以被删除或是否可以再次修改特性 <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
</code></pre></div><p>举例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span><span class="token string">&quot;nodeing&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">//对象已有的属性添加特性描述</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    configurable<span class="token punctuation">:</span><span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    enumerable<span class="token punctuation">:</span><span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    value<span class="token punctuation">:</span>任意类型的值<span class="token punctuation">,</span>
    writable<span class="token punctuation">:</span><span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//对象新添加的属性的特性描述</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    configurable<span class="token punctuation">:</span><span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    enumerable<span class="token punctuation">:</span><span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    value<span class="token punctuation">:</span>任意类型的值<span class="token punctuation">,</span>
    writable<span class="token punctuation">:</span><span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>下面详细解释描述符：</p> <h4 id="value"><a href="#value" aria-hidden="true" class="header-anchor">#</a> value</h4> <div class="language-js extra-class"><pre class="language-js"><code>value<span class="token punctuation">:</span> 只是用来设置当前需要添加或者修改属性的值，它可以是任意的类型
</code></pre></div><p>举例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> <span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment">// nodeing  如果不设置value值，默认为undefined</span>

</code></pre></div><h4 id="writable"><a href="#writable" aria-hidden="true" class="header-anchor">#</a> writable</h4> <div class="language-js extra-class"><pre class="language-js"><code>writeable<span class="token punctuation">:</span> 这个用来控制属性的值是否可以被重写。设置为<span class="token boolean">true</span>可以被重写；设置为<span class="token boolean">false</span>，不能被重写。默认为<span class="token boolean">false</span>。
</code></pre></div><p>举例：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     value<span class="token punctuation">:</span><span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
     writable<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;nodeing.com&quot;</span>

<span class="token comment">// 当writeable默认为false的时候，修改name的值是无效的 依旧会输出nodeing</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

</code></pre></div><p>你可以将上面案例中的 writable的值改成true，再来运行看看结果</p> <h4 id="enumerable"><a href="#enumerable" aria-hidden="true" class="header-anchor">#</a> enumerable</h4> <div class="language-js extra-class"><pre class="language-js"><code>enumerable<span class="token punctuation">:</span> 作用是控制属性是否可以被枚举，即是否可以被（<span class="token keyword">for</span> <span class="token keyword">in</span><span class="token function">）或者</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>这些方法遍历出来，默认
为<span class="token boolean">false</span>，设置为<span class="token boolean">true</span>以后，才可以被遍历出来
</code></pre></div><p>举例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     value<span class="token punctuation">:</span><span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
     enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="configurable"><a href="#configurable" aria-hidden="true" class="header-anchor">#</a> configurable</h4> <div class="language-js extra-class"><pre class="language-js"><code>configurable<span class="token punctuation">:</span> 作用有两个，<span class="token number">1.</span>是否可以使用<span class="token keyword">delete</span>删除目标属性，<span class="token number">2.</span>除 value 和 writable 特性外的其他特性是否可以被修改
</code></pre></div><p>举例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     value<span class="token punctuation">:</span><span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
     enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
     configurable<span class="token punctuation">:</span> <span class="token boolean">false</span>
     
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>name

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">// 依然可以输出value值：nodeing</span>
 
</code></pre></div><p>上面代码中，你可以将configurable的值改成true，再运行试试看</p> <p>举例2：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     value<span class="token punctuation">:</span><span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
     enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
     configurable<span class="token punctuation">:</span> <span class="token boolean">false</span>
     
<span class="token punctuation">}</span><span class="token punctuation">)</span>


Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    value<span class="token punctuation">:</span><span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
    enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    configurable<span class="token punctuation">:</span> <span class="token boolean">true</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment">// TypeError: Cannot redefine property: name</span>
</code></pre></div><p>上面代码中，你可以将第一次定义name属性的时候，给的configurable值改为true，再来运行看看输出结果</p> <div class="tip custom-block"><p>注意1：
configurable 如果默认为false的时候，要修改writable的值，必须是从true改为false，如果是从false改为true，就会抛出异常</p></div> <div class="tip custom-block"><p>注意2：</p> <p>如果不设置属性的特性，configurable、enumerable、writable这些值都默认为false</p> <p>Object.defineProperty(obj,'name',{});</p> <p>这种情况，configurable、enumerable、writable这些值都默认为false，value为undefined</p></div> <h3 id="_1-1-3-存取器描述"><a href="#_1-1-3-存取器描述" aria-hidden="true" class="header-anchor">#</a> 1.1.3.存取器描述</h3> <p>前面我们学习了 writable和value这两种描述选项，它们是和设置属性值相关的，我们还可以使用存取器getter和setter来获取或者设置值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token punctuation">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>   <span class="token comment">//getter 是一种获得属性值的方法</span>
    <span class="token function-variable function">set</span><span class="token punctuation">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>  <span class="token comment">// setter是一种设置属性值的方法。</span>
    configurable<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
    enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p>注意：使用了getter和setter后，writable和value就不能使用了</p></div> <p>举例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你正在获取name的值&quot;</span><span class="token punctuation">)</span>
         <span class="token keyword">return</span> <span class="token string">&quot;nodeing&quot;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
     configurable<span class="token punctuation">:</span> <span class="token boolean">true</span>
     
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment">// 触发get函数， 当前name属性的值为get函数返回的值</span>
 

</code></pre></div><p>举例2：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> initValue <span class="token operator">=</span> <span class="token string">&quot;nodeing&quot;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你正在获取name的值&quot;</span><span class="token punctuation">)</span>
         <span class="token keyword">return</span> initValue
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;你正在设置name的值&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">// 如果使用 obj.name = &quot;nodeing.com&quot;来重新设置值，此时的值 nodeing.com，会传给set函数里的第一个参数，</span>
        <span class="token comment">// 意味着 value = &quot;nodeing.com&quot;</span>
        initValue <span class="token operator">=</span> value
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;设置完毕&quot;</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
     configurable<span class="token punctuation">:</span> <span class="token boolean">true</span>
     
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;nodeing.com&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
 
</code></pre></div><div class="tip custom-block"><p>从上面两个例子中可以看出，get和set两个函数并不是一定要同时成对出现的</p></div> <h2 id="_1-2-实现vue中的响应式数据"><a href="#_1-2-实现vue中的响应式数据" aria-hidden="true" class="header-anchor">#</a> 1.2.实现Vue中的响应式数据</h2> <h3 id="_1-2-1-回顾vue中的数据响应式"><a href="#_1-2-1-回顾vue中的数据响应式" aria-hidden="true" class="header-anchor">#</a> 1.2.1.回顾Vue中的数据响应式</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./node_modules/vue/dist/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">let</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            el<span class="token punctuation">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                msg<span class="token punctuation">:</span> <span class="token string">&quot;nodeing&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 当修改msg值的时候，视图会跟着变化</span>
        vm<span class="token punctuation">.</span>msg <span class="token operator">=</span> <span class="token string">&quot;nodeing.com&quot;</span>


    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_1-2-2-实现vue中的数据响应式"><a href="#_1-2-2-实现vue中的数据响应式" aria-hidden="true" class="header-anchor">#</a> 1.2.2.实现Vue中的数据响应式</h3> <p>我们的需求是，当数据发生变化，视图跟着变化，下面我们通过Object.defineProperty来实现</p> <p>首先，我们来实现最简单的数据劫持</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 监听的数据对象</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">:</span> <span class="token string">&quot;nodeing&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 把data渲染到视图</span>
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;模拟msg被渲染&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 观察对象</span>

<span class="token keyword">function</span> <span class="token function">observer</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">// 在这里面，需要把每个属性劫持到geter和setter</span>
   <span class="token comment">// 首先判断obj是不是一个对象</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// 循环obj的属性，分别修改成getter和setter的模式</span>
       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">toRective</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">toRective</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> initValue
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            initValue <span class="token operator">=</span> value
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用观察者方法 观察data变化</span>
<span class="token function">observer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
 
</code></pre></div><p>上面就是最简单的数据劫持原理，但是，上面代码只是实现了对象第一层属性的监听，当数据变成下面这样:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">:</span> <span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
    goods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name：<span class="token string">&quot;手机&quot;</span><span class="token punctuation">,</span>
        price<span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们没办法监听到上面更深层次的对象，因此，还需要修改代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 监听的数据对象</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">:</span> <span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
    goods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&quot;手机&quot;</span><span class="token punctuation">,</span>
        price<span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 把data渲染到视图</span>
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;模拟msg被渲染&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 观察对象</span>

<span class="token keyword">function</span> <span class="token function">observer</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">// 在这里面，需要把每个属性劫持到geter和setter</span>
   <span class="token comment">// 首先判断obj是不是一个对象</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// 循环obj的属性，分别修改成getter和setter的模式</span>
       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">toRective</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">toRective</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>initValue<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">observer</span><span class="token punctuation">(</span>initValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> initValue
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            initValue <span class="token operator">=</span> value
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用观察者方法 观察data变化</span>
<span class="token function">observer</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
data<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">20</span>
</code></pre></div><p>当给data对象的属性设置一个新的对象的时候，这个新对象也是需要被监听的</p> <div class="language-js extra-class"><pre class="language-js"><code>data<span class="token punctuation">.</span>goods <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span><span class="token string">&quot;手机&quot;</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span>
data<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">20</span>
</code></pre></div><p>如果设置data属性变成上面这样，我们需要修改toRective方法</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">toRective</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObjcet</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">observer</span><span class="token punctuation">(</span>initValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> initValue
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当新设置的值和旧的值一样的时候，就不渲染</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>initValue <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span>
            <span class="token comment">// 当新设置的value值也是一个对象的时候，也需要observer操作</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isObjcet</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">observer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            initValue <span class="token operator">=</span> value
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 定义一个判断对象的方法</span>
<span class="token keyword">function</span> <span class="token function">isObjcet</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Object]&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2-3-set方法和变更方法"><a href="#_1-2-3-set方法和变更方法" aria-hidden="true" class="header-anchor">#</a> 1.2.3.set方法和变更方法</h3> <p>前面的代码，我们已经大致实现了数据响应式变化，但还有一些问题需要解决，比如，当新增对象属性的时候，无法实现响应式，实际上，在vue中，对于已经创建的实例，Vue不允许动态添加根级别的响应式property的，<a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noopener noreferrer">查看文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">:</span> <span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
    goods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&quot;手机&quot;</span><span class="token punctuation">,</span>
        price<span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 新增一个a属性 这个a属性不是响应式的</span>
data<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">200</span>
</code></pre></div><p>在vue中，实现了一个Vue.set方法来对新增属性进行响应式监听，它有一个别名vm.$set</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>基于前面的代码，我们也可以去实现这个set方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> $<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">toRective</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Object.defineProperty是不支持数组的，Vue文档中，包裹了一些数组的方法，它们是支持响应式的，这些方法有：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">splice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>我们也需要继续完善代码，以支持数组的更新检测</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 监听的数据对象</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    msg<span class="token punctuation">:</span> <span class="token string">&quot;nodeing&quot;</span><span class="token punctuation">,</span>
    goods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span><span class="token string">&quot;手机&quot;</span><span class="token punctuation">,</span>
        price<span class="token punctuation">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 把data渲染到视图</span>
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;模拟msg被渲染&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// 需要支持更新检测的方法</span>
<span class="token keyword">let</span> arrayMethods <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'push'</span><span class="token punctuation">,</span> <span class="token string">'pop'</span><span class="token punctuation">,</span> <span class="token string">'shift'</span><span class="token punctuation">,</span> <span class="token string">'unshift'</span><span class="token punctuation">,</span> <span class="token string">'splice'</span><span class="token punctuation">,</span> <span class="token string">'sort'</span><span class="token punctuation">,</span> <span class="token string">'reverse'</span><span class="token punctuation">]</span>
<span class="token comment">// 实现思路: 1 这些方法都是在数组原型上的  2 我们重新包裹这些原型上的方法，在调用了这些原型方法后，调用render方法更新视图</span>
<span class="token comment">// 第一步，先把原型复制一份出来，以免对数组原型产生破坏</span>
<span class="token keyword">let</span> newPrototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
arrayMethods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    newPrototype<span class="token punctuation">[</span>method<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">)</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 观察对象</span>

<span class="token keyword">function</span> <span class="token function">observer</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">// 先判断是不是数组</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> newPrototype
       
       <span class="token keyword">return</span>
   <span class="token punctuation">}</span>
   <span class="token comment">// 在这里面，需要把每个属性劫持到geter和setter</span>
   <span class="token comment">// 首先判断obj是不是一个对象</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">// 循环obj的属性，分别修改成getter和setter的模式</span>
       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">toRective</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toRective</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObjcet</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">observer</span><span class="token punctuation">(</span>initValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> initValue
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 当新设置的值和旧的值一样的时候，就不渲染</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>initValue <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isObjcet</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">observer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            initValue <span class="token operator">=</span> value
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">isObjcet</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Object]&quot;</span>
<span class="token punctuation">}</span>



<span class="token keyword">function</span> $<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">toRective</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>


<span class="token comment">// 调用观察者方法 观察data变化</span>
<span class="token function">observer</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>

 
</code></pre></div><p>我们自定义的$set方法也需要支持数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> $<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">toReactive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_1-3-proxy基础用法"><a href="#_1-3-proxy基础用法" aria-hidden="true" class="header-anchor">#</a> 1.3.proxy基础用法</h2> <p>Proxy 可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>如果要访问一个目标对象，在中间加一层拦截器，可以对外界的访问进行过滤和修改，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop <span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

proxy<span class="token punctuation">.</span>a
 
</code></pre></div><h2 id="_1-4-使用proxy来实现响应式数据"><a href="#_1-4-使用proxy来实现响应式数据" aria-hidden="true" class="header-anchor">#</a> 1.4.使用proxy来实现响应式数据</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  msg<span class="token punctuation">:</span> <span class="token string">&quot;hello nodeing&quot;</span><span class="token punctuation">,</span>
  goods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;手机&quot;</span><span class="token punctuation">,</span>
    price<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  arr<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">isObjcet</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;模拟视图更新&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isObjcet</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span><span class="token string">&quot;length&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
        Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>

<span class="token comment">// proxy.msg = &quot;20&quot;</span>
proxy<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// proxy.goods.price = 3000</span>
proxy<span class="token punctuation">.</span>goods<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">200</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/basics/vue进阶/数据双向绑定实现.html">
          2.数据双向绑定实现
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4c3c285e.js" defer></script><script src="/assets/js/2.35988976.js" defer></script><script src="/assets/js/73.7d91c309.js" defer></script>
  </body>
</html>
